# Nixpacks 설정 파일 - Railway 빌드 최적화

[phases.setup]
nixPkgs = ["nodejs", "npm"]

[phases.install]
# 의존성 설치 단계
cmds = ["npm ci --no-audit --no-fund"]

[phases.build]
# 빌드 단계
cmds = ["npm run build"]

[start]
# 애플리케이션 시작 명령어
cmd = "npm start"

# 환경 변수 설정
[variables]
NPM_CONFIG_CACHE = "/tmp/npm-cache"
NPM_CONFIG_FUND = "false"
NPM_CONFIG_AUDIT = "false"
NPM_CONFIG_PREFER_OFFLINE = "true"
NPM_CONFIG_NO_OPTIONAL = "true"

# 빌드 캐시 비활성화 (충돌 방지)
[phases.build.cache]
paths = []